{
  "fields": [
    {
      "compression_ranges": {
        "description": "What value to be used to compress with. The 'value' is interpreted as rate or target_token depending on compressor_type.",
        "elements": {
          "fields": [
            {
              "max_tokens": {
                "required": true,
                "type": "integer"
              }
            },
            {
              "min_tokens": {
                "required": true,
                "type": "integer"
              }
            },
            {
              "value": {
                "required": true,
                "type": "number"
              }
            }
          ],
          "type": "record"
        },
        "required": true,
        "type": "array"
      }
    },
    {
      "compressor_type": {
        "default": "rate",
        "description": "What compression type to use to compress with",
        "one_of": [
          "rate",
          "target_token"
        ],
        "required": true,
        "type": "string"
      }
    },
    {
      "compressor_url": {
        "default": "http://localhost:8080",
        "description": "The url of the compressor",
        "required": true,
        "type": "string"
      }
    },
    {
      "keepalive_timeout": {
        "default": 60000,
        "description": "The keepalive timeout for the established http connnection",
        "type": "number"
      }
    },
    {
      "log_text_data": {
        "default": false,
        "description": "Log the text data",
        "type": "boolean"
      }
    },
    {
      "message_type": {
        "default": [
          "user"
        ],
        "elements": {
          "one_of": [
            "assistant",
            "system",
            "user"
          ],
          "type": "string"
        },
        "required": true,
        "type": "set"
      }
    },
    {
      "stop_on_error": {
        "default": true,
        "description": "Stop processing if an error occurs",
        "type": "boolean"
      }
    },
    {
      "timeout": {
        "default": 10000,
        "description": "Connection timeout with the compressor",
        "type": "number"
      }
    }
  ],
  "required": true,
  "type": "record"
}