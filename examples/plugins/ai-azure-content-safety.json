{
  "fields": [
    {
      "azure_api_version": {
        "default": "2023-10-01",
        "description": "Sets the ?api-version URL parameter, used for defining the Azure Content Services interchange format.",
        "len_min": 1,
        "required": true,
        "type": "string"
      }
    },
    {
      "azure_client_id": {
        "description": "If `azure_use_managed_identity` is true, set the client ID if required.",
        "required": false,
        "type": "string"
      }
    },
    {
      "azure_client_secret": {
        "description": "If `azure_use_managed_identity` is true, set the client secret if required.",
        "required": false,
        "type": "string"
      }
    },
    {
      "azure_tenant_id": {
        "description": "If `azure_use_managed_identity` is true, set the tenant ID if required.",
        "required": false,
        "type": "string"
      }
    },
    {
      "azure_use_managed_identity": {
        "default": false,
        "description": "If checked, uses (if set) `azure_client_id`, `azure_client_secret`, and/or `azure_tenant_id` for Azure authentication, via Managed or User-assigned identity",
        "type": "boolean"
      }
    },
    {
      "blocklist_names": {
        "description": "Use these configured blocklists (in Azure Content Services) when inspecting content.",
        "elements": {
          "type": "string"
        },
        "type": "array"
      }
    },
    {
      "categories": {
        "description": "Array of categories, and their thresholds, to measure on.",
        "elements": {
          "fields": [
            {
              "name": {
                "required": true,
                "type": "string"
              }
            },
            {
              "rejection_level": {
                "required": true,
                "type": "integer"
              }
            }
          ],
          "required": true,
          "type": "record"
        },
        "type": "array"
      }
    },
    {
      "content_safety_key": {
        "description": "If `azure_use_managed_identity` is true, set the API key to call Content Safety.",
        "encrypted": true,
        "referenceable": true,
        "required": false,
        "type": "string"
      }
    },
    {
      "content_safety_url": {
        "description": "Full URL, inc protocol, of the Azure Content Safety instance.",
        "referenceable": true,
        "required": true,
        "type": "string"
      }
    },
    {
      "halt_on_blocklist_hit": {
        "default": true,
        "description": "Tells Azure to reject the request if any blocklist filter is hit.",
        "type": "boolean"
      }
    },
    {
      "output_type": {
        "default": "FourSeverityLevels",
        "description": "See https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/content-filter#content-filtering-categories",
        "one_of": [
          "EightSeverityLevels",
          "FourSeverityLevels"
        ],
        "type": "string"
      }
    },
    {
      "reveal_failure_reason": {
        "default": true,
        "description": "Set true to tell the caller why their request was rejected, if so.",
        "type": "boolean"
      }
    },
    {
      "text_source": {
        "default": "concatenate_all_content",
        "description": "Select where to pick the 'text' for the Azure Content Services request.",
        "one_of": [
          "concatenate_all_content",
          "concatenate_user_content"
        ],
        "type": "string"
      }
    }
  ],
  "required": true,
  "type": "record"
}